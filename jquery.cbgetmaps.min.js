/*!
* jquery.cbgetmap.js v1.2.2
* Auther @maechabin
* Licensed under mit license
* https://github.com/maechabin/jquery.cbgetmaps.js
*/
!function(a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery"),window,document):a(jQuery,window,document)}(function(a){"use strict";var b=function(b,c,d){this.element=b,this.$element=a(b),this.config={},this.options=c,this.map_canvas=[],this.map_canvas_id=d,this.geocoder=new google.maps.Geocoder};b.prototype.defaults={map_location_name:".cb-getlocation",map_canvas_name:".cb-mapcanvas",map_canvas_width:"100%",map_canvas_height:"120px",map_canvas_text:"大きな地図で見る",map_canvas_text_size:"14px",map_zoom:13,map_type:"ROADMAP"},b.prototype.getData=function(){var a=this.$element.find(this.config.map_location_name).attr("title");this.codeAddress(a)},b.prototype.codeAddress=function(a){var b=this,c=a,d={zoom:b.config.map_zoom,mapTypeId:google.maps.MapTypeId[b.config.map_type],scrollwheel:!1},e=b.map_canvas[b.map_canvas_id],f=new google.maps.Map(e,d);this.geocoder.geocode({address:c},function(a,c){var d;c==google.maps.GeocoderStatus.OK?(d=a[0].geometry.location,f.setCenter(d),marker=new google.maps.Marker({map:f,position:d}),b.makeLink(d)):console.log("Geocode was not successful for the following reason: "+c)})},b.prototype.makeLink=function(b){var c=b+"",d=c.replace(/[\(\)]/g,""),e=a("<p>").addClass("cb-maplink").css({"font-size":this.config.map_canvas_text_size,"margin-top":"4px"}),f=a("<a>").attr({href:"https://www.google.co.jp/maps?q="+d,target:"_blank"}).html("<b>"+this.config.map_canvas_text+"</b>"),g=e.append(f);this.map_canvas.eq(this.map_canvas_id).after(g)},b.prototype.makeCanvas=function(){this.map_canvas=a("."+this.$element.attr("class")).find(this.config.map_canvas_name),this.map_canvas.css({margin:0,width:this.config.map_canvas_width,height:this.config.map_canvas_height})},b.prototype.init=function(){return this.config=a.extend({},this.defaults,this.options),this.makeCanvas(),this.getData(),this},a.fn.cbGetMaps=function(a){return this.each(function(c){new b(this,a,c).init()})}});