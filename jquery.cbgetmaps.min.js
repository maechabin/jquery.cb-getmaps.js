/*!
* jquery.cbgetmap.js v1.2.0
* Auther @maechabin
* Licensed under mit license
* https://github.com/maechabin/jquery.cb-getmaps.js
*/
(function(d,c,a,e){var b=function(g,f,h){this.element=g;this.$element=d(g);this.config;this.options=f;this.map_location;this.map_canvas;this.map_canvas_id=h;this.geocoder=new google.maps.Geocoder()};b.prototype.defaults={map_location_name:".cb-getlocation",map_canvas_name:".cb-mapcanvas",map_canvas_width:"100%",map_canvas_height:"120px",map_canvas_text:"大きな地図で見る",map_canvas_text_size:"14px",map_zoom:13,map_type:"ROADMAP"};b.prototype.getData=function(){var f=this.$element.find(this.config.map_location_name).attr("title");this.codeAddress(f)};b.prototype.codeAddress=function(f){var h=this;var f=f;var g={zoom:h.config.map_zoom,mapTypeId:google.maps.MapTypeId[h.config.map_type],scrollwheel:false};var j=h.map_canvas[h.map_canvas_id];var i=new google.maps.Map(j,g);this.geocoder.geocode({address:f},function(n,m){var l,k;if(m==google.maps.GeocoderStatus.OK){l=n[0].geometry.location;i.setCenter(l);marker=new google.maps.Marker({map:i,position:l});h.makeLink(l)}else{console.log("Geocode was not successful for the following reason: "+m)}})};b.prototype.makeLink=function(f){var g=f+"";var k=g.replace(/[\(\)]/g,"");var h=d("<p>").addClass("cb-maplink").css({"font-size":this.config.map_canvas_text_size,"margin-top":"4px"});var j=d("<a>").attr({href:"https://www.google.co.jp/maps?q="+k,target:"_blank"}).html("<b>"+this.config.map_canvas_text+"</b>");var i=h.append(j);this.map_canvas.eq(this.map_canvas_id).after(i)};b.prototype.makeCanvas=function(){this.map_canvas=d("."+this.$element.attr("class")).find(this.config.map_canvas_name);this.map_canvas.css({margin:0,width:this.config.map_canvas_width,height:this.config.map_canvas_height})};b.prototype.init=function(){this.config=d.extend({},this.defaults,this.options);this.makeCanvas();this.getData();return this};d.fn.cbGetMaps=function(f){return this.each(function(g){new b(this,f,g).init()})}}(jQuery,window,document));